
 
  <div *ngIf="isLoading; else clothsIformations">
    <div class="text-center">
        <div class="spinner-grow text-info" style="width: 3rem; height: 3rem;" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
    </div>
</div>

<ng-template #clothsIformations>

 <div class="card">
    <div class="card-header">
      <span style="margin-right: 60%; font-weight: bold;">{{  customer.names }}'s cloths</span>
      <a [hidden]="isAdmin"
       type="button" data-bs-toggle="modal" data-bs-target="#addNewClothView"
      class="btn btn-success btn-sm"> <i class="far fa fa-plus-square"></i> Add Cloth</a>
    </div>

<div class="card-body">

  <cdk-virtual-scroll-viewport itemSize="50" class="example-viewport">
    <table class="table caption-top table-sm table-bordered">
        <thead class="table table-dark">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Name</th>
            <th scope="col">Color</th>
            <th scope="col">Category</th>
            <th scope="col">Status</th>
            <th scope="col">DeliveryStatus</th>
            <th scope="col">Type</th>
            <th scope="col">PickUpDate</th>
            <th scope="col">Cost</th>
            <th scope="col">O/N</th>
          </tr>
        </thead>
        <tbody>
          <tr  *ngFor="let cloth of customer.cloth; let i = index">
            <th scope="row">{{ i + 1}}</th>
            <td> {{ cloth.clothName }}</td>
            <td> {{ cloth.clothColor }}</td>
            <td> {{ cloth.clothCategory }}</td>
            <td> {{ cloth.clothStatus }}</td>
            <td> {{ cloth.deliveryStatus }}</td>
            <td> {{ cloth.serviceType }}</td>
            <td> {{ cloth.pickUpDate }}</td>
            <td> {{ cloth.cost }}</td> 
            <td>
                <button
                 [hidden]="isAdmin"
                 (click)="handleClothStatusForm(cloth)"
                 type="button"
                 class="btn btn-secondary btn-sm"
                 data-bs-toggle="modal" data-bs-target="#clothUpdateView"
                  style="font-size:13px">
                  Edit Status <i class="fa fa-edit"></i>
                </button>
              
            </td>
          </tr>
        </tbody>
      </table>
    </cdk-virtual-scroll-viewport>
<!-- update cloths modal -->
      <div class="modal fade" id="clothUpdateView" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="staticBackdropLabel">Cloth Status</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            <form [formGroup]="clothStatusEditForm" class="row g-3">

              <div class="col-md-4">
                <label for="validationServer04" class="form-label">DeliveryStatus</label>
                <select class="form-select" formControlName="deliveryStatus"
                id="validationServer04" aria-describedby="validationServer04Feedback" >
                  <option selected disabled value="">Choose...</option>
                  <option>Delivered</option>
                  <option>Not Delivered</option>
                </select>
  
                <div>
                  <div style="color: red;" >
                    Please select a valid status for this cloth.
                  </div>
                 </div>
              </div>

              <div class="col-md-4">
                <label for="validationServer04" class="form-label">Progress Status</label>
                <select class="form-select" formControlName="progressStatus"
                id="validationServer04" aria-describedby="validationServer04Feedback" >
                  <option selected disabled value="">Choose...</option>
                  <option>In Progress</option>
                  <option>Completed</option>
                </select>
  
                <div>
                  <div style="color: red;" >
                    Please select if it's completed or still in progress.
                  </div>
                 </div>
              </div>

              <div class="col-md-6">
                <label for="validationServer03" class="form-label">PickUp Date</label>
                <input type="date" class="form-control" formControlName="pickUpDate"
                 id="validationServer03" aria-describedby="validationServer03Feedback" >
              </div>

            </form>
            </div>
            <div class="modal-footer">
              <button (click)="updateClothArray()"  [disabled]="!clothStatusEditForm.valid" 
               type="button" style="width: fit-content;" class="btn site-background-color site-secondary-color"  data-bs-dismiss="modal">Update Status</button>
            </div>
          </div>
        </div>
      </div>
<!-- update cloths modal  -->



<!-- add cloths modal -->
<div class="modal fade" id="addNewClothView" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-fullscreen">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="staticBackdropLabel">New Cloth</h2>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
      <form class="col-6" [formGroup]="newClothForm">
         <!-- fill Cloth -->
              
              <div class="card-body row g-3">
                
                <h3 class="form-title">Fill in Cloth Infomation</h3>
  
                <div class="col-md-6">
                  <label for="validationServer02" class="form-label">Cloth Name</label>
                  <input type="text" 
                   class="form-control" 
                   id="validationServer02" formControlName="clothName">
    
                    <div style="color: red;">
                      Please provide a valid name for this cloth or dress.
                    </div>
                  
                </div>
  
                
                <div class="col-md-6">
                  <label for="validationServer02" class="form-label">Colour</label>
                  <input type="text" 
                   class="form-control" 
                   id="validationServer02" formControlName="clothColor">
    
                  <div >
                    <div style="color: red;">
                      Please provide a valid colour for this cloth or dress.
                    </div>
                   </div>
                </div>
        
                <div class="col-md-4">
                  <label for="validationServer04" class="form-label">ClothCategory</label>
                  <select class="form-select"  formControlName="clothCategory"
                  id="validationServer04" aria-describedby="validationServer04Feedback">
                    <option selected disabled value="">Choose...</option>
                    <option>Shirt</option>
                    <option>Trouser</option>
                    <option>Other</option>
                  </select>
    
                  <div >
                    <div style="color: red;" >
                      Please select a valid category.
                    </div>
                   </div>
                </div>
  
  
                <div class="col-md-4">
                  <label for="validationServer04" class="form-label">ServiceType</label>
                  <select class="form-select" formControlName="serviceType"
                  id="validationServer04" aria-describedby="validationServer04Feedback" >
                    <option selected disabled value="">Choose...</option>
                    <option>Regular</option>
                    <option>Express</option>
                  </select>
    
                  <div>
                    <div style="color: red;" >
                      Please select a valid serviceType.
                    </div>
                   </div>
                </div>
  
  
                <div class="col-md-4">
                  <label for="validationServer04" class="form-label">ClothStatus</label>
                  <select class="form-select" formControlName="clothStatus"
                  id="validationServer04" aria-describedby="validationServer04Feedback" >
                    <option selected disabled value="">Choose...</option>
                    <option>In Progress</option>
                    <option>Completed</option>
                  </select>
    
                  <div>
                    <div style="color: red;" >
                      Please select a valid status for this cloth.
                    </div>
                   </div>
                </div>
  
  
                <div class="col-md-4">
                  <label for="validationServer04" class="form-label">DeliveryStatus</label>
                  <select class="form-select" formControlName="deliveryStatus"
                  id="validationServer04" aria-describedby="validationServer04Feedback" >
                    <option selected disabled value="">Choose...</option>
                    <option>Delivered</option>
                    <option>Not Delivered</option>
                  </select>
    
                  <div >
                    <div style="color: red;" >
                      Please select a valid status for this cloth.
                    </div>
                   </div>
                </div>
  
  
                <div class="col-md-6">
                  <label for="validationServer03" class="form-label">PickUp Date</label>
                  <input type="date" class="form-control" formControlName="pickUpDate"
                   id="validationServer03" aria-describedby="validationServer03Feedback" >
                </div>
                
                <div class="col-md-6">
                  <label for="validationServer02" class="form-label">Cost</label>
                  <input type="text"  formControlName="cost"
                   class="form-control" 
                   id="validationServer02" placeholder="$ 0.00"  >
    
                  <div>
                    <div  style="color: red;">
                      Please provide a valid cost for this cloth should be a number.
                    </div>
                   </div>
                </div>
                
                <div class="mb-3">
                  <label for="validationTextarea" class="form-label">Description</label>
                  <textarea class="form-control" id="validationTextarea" formControlName="description"
                   placeholder="describe what to do with this cloth eg washing and ironing... starhing etc ." ></textarea>
                  <div class="invalid-feedback">
                    Please enter a short description about this cloth in the textarea.
                  </div>
                </div>

  
              </div>
        <!-- fill Cloth -->
      
      </form>
      </div>
      <div class="modal-footer">
        <button (click)="saveNewCloth()"  [disabled]="!newClothForm.valid" 
         type="button" style="width: fit-content;" class="btn site-background-color site-secondary-color"  data-bs-dismiss="modal">Save Cloth</button>
      </div>
    </div>
  </div>
</div>
<!-- add cloths modal  -->
</div>
</div>

</ng-template>